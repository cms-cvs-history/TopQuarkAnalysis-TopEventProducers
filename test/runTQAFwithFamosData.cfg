process TtEventReco  = 
{
  untracked PSet maxEvents = { untracked int32 input = -1 }

  # initialize MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  source = PoolSource 
  {
    untracked vstring fileNames = { 'file:input.root' }
  }

  # Construct the MC Generated Ttbar Event
  include "TopQuarkAnalysis/TopEventProducers/data/TtGenEvtProducer.cff"
	
  # filter a specific decay chain
  include "TopQuarkAnalysis/TopEventProducers/data/TtSemiLeptonicFilter.cfi"
	  
  # perform high level reco tasks
  include "TopQuarkAnalysis/TopObjectProducers/data/HighLevelReco.cff"

  # build the TopObjects (TopJets, TopMuons, TopElectrons, TopMETs)
  include "TopQuarkAnalysis/TopObjectProducers/data/TopObjectProducers.cff"
	  
  # apply a kinematic selection on the TopObjects
  include "TopQuarkAnalysis/TopEventProducers/data/TtSemiObjectSelection.cff"
   
  # TtSemiEvt solutions
  include "TopQuarkAnalysis/TopEventProducers/data/TtSemiEvtSolProducer.cfi"
  replace solutions.addLRSignalSel = true
  replace solutions.addLRJetComb   = true

  // to use gsTracks
  replace jetTracksAssociator.tracks = gsWithMaterialTracks
  replace allLayer1TopBJets.trackAssociation.tracks = gsWithMaterialTracks
  replace allLayer1TopLJets.trackAssociation.tracks = gsWithMaterialTracks
  replace allLayer1TopLJets.tracks = gsWithMaterialTracks
  replace allLayer1TopBJets.tracks = gsWithMaterialTracks
  replace allLayer1TopElectrons.tracks = gsWithMaterialTracks
  replace allLayer1TopMuons.tracks = gsWithMaterialTracks
  replace allLayer1TopTaus.tracks = gsWithMaterialTracks
  // to use Famos muons
  replace allLayer1TopMETs.muonSource = "paramMuons:ParamGlobalMuons"
  replace allLayer1TopMuons.muonSource = "paramMuons:ParamGlobalMuons"	
  replace MCJetCorJetFastjet10.src = fastjet10CaloJets
  replace MCJetCorJetFastjet6.src  = fastjet6CaloJets

  path p = { makeGenEvt, ttSemiLeptonicFilter, highLevelReco, allTopObjects, objectSelection, solutions }

  module out = PoolOutputModule 
  {
    untracked string fileName = "output.root"
  }
  endpath outpath = { out }
}
