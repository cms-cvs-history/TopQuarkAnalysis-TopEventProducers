process TtEventReco  = {
	
	# initialize MessageLogger
   	  include "FWCore/MessageLogger/data/MessageLogger.cfi"
   	  replace MessageLogger.cout.threshold = "ERROR"

   	# input file
        #  source = PoolSource {
        #    untracked vstring fileNames =
        #    {
        #      "dcap://maite.iihe.ac.be/pnfs/iihe/cms/ph/sc4/store/mc/2007/4/12/ttbar_gen_rec_allReco/0001/063E8B56-80EA-DB11-A95D-00001A19E30D.root"
        #    }
        #    untracked int32   maxEvents = -1
        #    untracked uint32 skipEvents = 0
        #  }
          include "TopQuarkAnalysis/TopObjectProducers/test/RecoInput.cfi"

	# Construct the MC Generated Ttbar Event
	  include "TopQuarkAnalysis/TopEventProducers/data/TtGenEvtProducer.cfi"
	
	# filter a specific decay chain
	  include "TopQuarkAnalysis/TopEventProducers/data/TtGenEvtDecayFilter.cfi"
          //replace genTtDecaySel.allowDecay = -12
	  
	# perform high level reco tasks
	  include "TopQuarkAnalysis/TopObjectProducers/data/HighLevelReco.cff"

	# build the TopObjects (TopJets, TopMuons, TopElectrons, TopMETs)
	  include "TopQuarkAnalysis/TopObjectProducers/data/TopObjectProducers.cff"
	  
        # apply a kinematic selection on the TopObjects
	  include "TopQuarkAnalysis/TopEventProducers/data/TtSemiObjectSelection_default.cff"
          //replace solutions.matchToGenEvt = false
   
        # TtSemiEvt solutions
	  include "TopQuarkAnalysis/TopEventProducers/data/TtSemiEvtSolProducer_default.cfi"
	  replace solutions.addLRSignalSel = true
	  replace solutions.addLRJetComb   = true
	
	# output
          module out = PoolOutputModule {
            untracked string fileName = "TtSemiMuEvents.root"
            untracked vstring outputCommands = {
              "drop *",
              "keep *_*_*_TtEventReco"
            }
            untracked bool verbose = false
          }

	path p = {genEvt, genTtDecaySel, highLevelReco, allTopObjects, objectSelection, solutions}
        endpath outpath = { out }	
}
